<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Calendar 2026 Interactiv</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    background-color: #2b2b2b;
    color: #f0f0f0;
    display: flex;
    flex-direction: column;
    align-items: center;
}
#calendar-container {
    width: 100%;
    padding: 20px;
    box-sizing: border-box;
}
.summary {
    margin-top: 20px;
    margin-bottom: 20px;
    font-size: 1.3em;
    font-weight: bold;
    text-align: center;
}
table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 40px;
    background-color: #3a3a3a;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
}
caption {
    font-size: 2em;
    font-weight: bold;
    text-transform: capitalize;
    margin-bottom: 15px;
}
th, td {
    border: 1px solid #999;
    width: 14%;
    height: 80px;
    text-align: center;
    vertical-align: top;
    position: relative;
    color: #f0f0f0;
}
th {
    background-color: #555;
    font-weight: bold;
    font-size: 1.2em;
}
.weekend { background-color: #555555; }
.holiday { background-color: #ff8c00; }
.present { background-color: #007f00 !important; }
.co { background-color: #005f9e !important; }

.day-number {
    font-weight: bold;
    font-size: 1.5em;
}
.holiday-name {
    font-size: 0.7em;
    display: block;
    margin-top: 3px;
}

select {
    width: 100%;
    height: 100%;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    margin: 0;
    padding: 0;
}
</style>
</head>
<body>

<div class="summary">
    <span><strong>Total Prezent:</strong> <span id="total-present">0</span></span> &nbsp;&nbsp;&nbsp;
    <span><strong>Total zile de CO:</strong> <span id="total-co">0</span></span>
</div>

<div id="calendar-container"></div>

<script>
const holidays = {
    "2026-01-01": "Anul Nou",
    "2026-01-02": "A doua zi de Anul Nou",
    "2026-01-06": "Boboteaza",
    "2026-01-07": "Sf. Ioan Botezatorul",
    "2026-01-24": "Unirea Principatelor Române",
    "2026-04-10": "Vinerea Mare",
    "2026-04-12": "Paștele ortodox",
    "2026-04-13": "A doua zi de Paște",
    "2026-05-01": "Ziua Muncii",
    "2026-05-31": "Rusaliile",
    "2026-06-01": "A doua zi de Rusalii / Ziua Copilului",
    "2026-08-15": "Adormirea Maicii Domnului",
    "2026-11-30": "Sf. Andrei",
    "2026-12-01": "Ziua Națională a României",
    "2026-12-25": "Crăciun (prima zi)",
    "2026-12-26": "Crăciun (a doua zi)"
};

function createCalendar(year) {
    const container = document.getElementById("calendar-container");
    container.innerHTML = '';

    for (let month = 0; month < 12; month++) {
        const date = new Date(year, month, 1);
        const monthName = date.toLocaleString('ro-RO', { month: 'long' });
        const table = document.createElement("table");
        table.id = `month-${month}`;

        const caption = document.createElement("caption");
        caption.textContent = monthName;
        table.appendChild(caption);

        const thead = document.createElement("thead");
        const headerRow = document.createElement("tr");
        ["Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă","Duminică"].forEach(day => {
            const th = document.createElement("th");
            th.textContent = day;
            headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);
        table.appendChild(thead);

        const tbody = document.createElement("tbody");
        let firstDay = new Date(year, month, 1).getDay();
        firstDay = (firstDay === 0) ? 6 : firstDay - 1;
        let currentDay = 1;
        let daysInMonth = new Date(year, month + 1, 0).getDate();

        for (let week = 0; week < 6; week++) {
            const tr = document.createElement("tr");
            for (let d = 0; d < 7; d++) {
                const td = document.createElement("td");
                if ((week === 0 && d < firstDay) || currentDay > daysInMonth) {
                    td.textContent = '';
                } else {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`;
                    const dayObj = new Date(year, month, currentDay);

                    const dayNumber = document.createElement("span");
                    dayNumber.className = "day-number";
                    dayNumber.textContent = currentDay;
                    td.appendChild(dayNumber);

                    if (holidays[dateStr]) {
                        td.classList.add('holiday');
                        const holidayName = document.createElement("span");
                        holidayName.className = "holiday-name";
                        holidayName.textContent = holidays[dateStr];
                        td.appendChild(holidayName);
                    } else if (dayObj.getDay() === 0 || dayObj.getDay() === 6) {
                        td.classList.add('weekend');
                    } else {
                        const select = document.createElement("select");
                        ["", "present", "co"].forEach(val => {
                            const option = document.createElement("option");
                            option.value = val;
                            option.textContent = val === "present" ? "Prezent" : val === "co" ? "CO" : "";
                            select.appendChild(option);
                        });

                        // Restaurare stare salvată
                        const savedValue = localStorage.getItem(dateStr);
                        if (savedValue) {
                            select.value = savedValue;
                            td.classList.add(savedValue);
                        }

                        select.addEventListener("change", function() {
                            td.classList.remove("present", "co");
                            if (select.value === "present") td.classList.add("present");
                            if (select.value === "co") td.classList.add("co");

                            localStorage.setItem(dateStr, select.value);
                            updateSummary();
                        });

                        td.style.position = "relative";
                        td.appendChild(select);
                    }
                    currentDay++;
                }
                tr.appendChild(td);
            }
            tbody.appendChild(tr);
        }
        table.appendChild(tbody);
        container.appendChild(table);
    }
    updateSummary();
}

function updateSummary() {
    let presentCount = 0;
    let coCount = 0;
    Object.keys(localStorage).forEach(k => {
        const val = localStorage.getItem(k);
        if (val === "present") presentCount++;
        if (val === "co") coCount++;
    });
    document.getElementById("total-present").textContent = presentCount;
    document.getElementById("total-co").textContent = coCount;
}

createCalendar(2026);
</script>

</body>
</html>
